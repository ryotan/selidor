<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">

{{ if site.Params.anchor.headings }}
  <script type="application/javascript">
    const anchor = heading => {
      const a = document.createElement('a');
      a.href = '#' + heading.id;
      a.classList.add('heading-anchor');
      a.innerHTML = '{{ site.Params.anchor.icon | default "<i class=\"heading-anchor-icon\" />" }}';
      return a;
    };
    const createAnchorLinkForHeadings = pageContent => {
      if (!pageContent) {
        return;
      }
      pageContent.querySelectorAll('h1, h2, h3, h4, h5, h6').forEach(heading => {
        if (heading.id) {
          heading.appendChild(anchor(heading));
        }
      });
    };
    document.addEventListener('DOMContentLoaded', () => createAnchorLinkForHeadings(document.getElementById('page-content')));
  </script>
  {{/* TODO: CSS/JavaScriptを使えるようにしたら消す。 */}}
  <script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js" crossorigin="anonymous"></script>
{{ end }}

{{ hugo.Generator }}
{{/* NOTE: プロダクション用にビルドするときには `HUGO_ENV="production"` を環境変数に設定してください。 */}}
{{ if eq (getenv "HUGO_ENV") "production" | or (eq site.Params.env "production")  }}
  <meta name="robots" content="index, follow">
{{ else }}
  <meta name="robots" content="noindex, nofollow">
{{ end }}

{{ $assets := site.Data.webpack.app }}
{{ with $assets.css }}
  <link href="{{ relURL (printf "%s/%s" "dist" .) }}" rel="stylesheet">
{{ end }}

{{ range site.Params.customCss }}
  <link rel="stylesheet" href="{{ relURL (site.BaseURL) }}{{ . }}">
{{ end }}

{{ if .OutputFormats.Get "RSS" }}
  {{ with .OutputFormats.Get "RSS" }}
    <link href="{{ .RelPermalink | relLangURL }}" rel="alternate" type="application/rss+xml" title="{{ site.Title }}"/>
    <link href="{{ .RelPermalink | relLangURL }}}" rel="feed" type="application/rss+xml" title="{{ site.Title }}"/>
  {{ end }}
{{ end }}

{{/* NOTE: These Hugo Internal Templates can be found starting at https://github.com/spf13/hugo/blob/master/tpl/tplimpl/template_embedded.go#L158 */}}
{{- template "_internal/opengraph.html" . -}}
{{- template "_internal/schema.html" . -}}
{{- template "_internal/twitter_cards.html" . -}}

{{ if eq (getenv "HUGO_ENV") "production" | or (eq site.Params.env "production") }}
  {{ template "_internal/google_analytics_async.html" . }}
{{ end }}
